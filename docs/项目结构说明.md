# 项目结构说明

## 📁 整理后的项目结构

```
feedback-collector-py/
├── start.py                    # 🚀 主启动脚本
├── README.md                   # 📖 项目主文档
│
├── backend/                    # 🔧 后端代码
│   ├── mcp_server_fastmcp.py      # FastMCP 服务器
│   ├── fastapi_server.py          # FastAPI Web 服务器
│   └── requirements.txt           # Python 依赖
│
├── frontend/                   # 🎨 前端代码
│   ├── src/                        # React 源代码
│   │   ├── components/             # React 组件
│   │   │   ├── FeedbackForm.js     # 反馈表单组件
│   │   │   ├── MessagePanel.js     # 消息面板组件
│   │   │   └── StatusIndicator.js  # 状态指示器组件
│   │   ├── hooks/                  # 自定义 Hooks
│   │   │   └── useWebSocket.js     # WebSocket Hook
│   │   ├── utils/                  # 工具函数
│   │   │   └── session.js          # 会话管理工具
│   │   ├── styles/                 # 样式文件
│   │   │   └── index.css           # 主样式文件
│   │   ├── App.js                  # 主应用组件
│   │   └── index.js                # 应用入口
│   ├── public/                     # 公共资源
│   │   └── index.html              # HTML 模板
│   ├── build/                      # React 构建输出（构建后生成）
│   ├── package.json                # Node.js 依赖配置
│   ├── tailwind.config.js          # Tailwind CSS 配置
│   ├── postcss.config.js           # PostCSS 配置
│   └── feedback_ui.html            # HTML 界面（传统版本）
│
├── scripts/                    # 📜 脚本文件
│   ├── start_servers_fastmcp.py   # 服务器启动脚本
│   ├── build_react.py             # React 构建脚本
│   └── demo_fastmcp.py            # 演示脚本
│
├── tests/                      # 🧪 测试文件
│   └── test_fastmcp_client.py     # 测试客户端
│
└── docs/                       # 📚 文档
    ├── README_FastMCP.md           # 详细技术文档
    ├── 迁移总结.md                 # 迁移报告
    └── 项目结构说明.md             # 本文档
```

## 🎯 设计原则

### 1. 分离关注点
- **backend/**: 所有后端相关代码和依赖
- **frontend/**: 所有前端相关代码和资源
- **scripts/**: 工具脚本和启动脚本
- **tests/**: 测试代码
- **docs/**: 文档和说明

### 2. 统一入口
- **start.py**: 提供统一的命令行接口
- 支持多种操作：start, build, demo, test

### 3. 模块化设计
- 每个目录都有明确的职责
- 便于独立开发和维护
- 支持团队协作

## 🚀 使用方法

### 主启动脚本
```bash
# 启动完整服务器
python start.py start

# 仅启动 MCP 服务器
python start.py start --mcp-only

# 构建 React 前端
python start.py build

# 运行演示
python start.py demo

# 运行测试
python start.py test
```

### 直接使用脚本
```bash
# 启动服务器
python scripts/start_servers_fastmcp.py

# 构建 React（需要在 frontend 目录）
cd frontend
python ../scripts/build_react.py

# 运行测试
python tests/test_fastmcp_client.py
```

## 📦 依赖管理

### Python 依赖
- 位置: `backend/requirements.txt`
- 安装: `pip install -r backend/requirements.txt`

### Node.js 依赖
- 位置: `frontend/package.json`
- 安装: `cd frontend && npm install`

## 🔧 开发工作流

### 1. 后端开发
```bash
# 进入后端目录
cd backend

# 安装依赖
pip install -r requirements.txt

# 直接运行服务器
python mcp_server_fastmcp.py
python fastapi_server.py
```

### 2. 前端开发
```bash
# 进入前端目录
cd frontend

# 安装依赖
npm install

# 开发模式（热重载）
npm start

# 构建生产版本
npm run build
```

### 3. 集成测试
```bash
# 在项目根目录
python start.py start    # 启动完整服务器
python start.py test     # 运行测试
python start.py demo     # 运行演示
```

## 🌟 优势

### 1. 清晰的结构
- 前后端分离，职责明确
- 脚本和测试独立管理
- 文档集中存放

### 2. 易于维护
- 每个模块可以独立开发
- 依赖管理清晰
- 版本控制友好

### 3. 团队协作
- 前端和后端开发者可以并行工作
- 清晰的接口定义
- 统一的开发流程

### 4. 部署友好
- 前端可以独立构建和部署
- 后端可以容器化
- 支持微服务架构

## 🔄 迁移对比

### 迁移前（扁平结构）
```
├── mcp_server_fastmcp.py
├── fastapi_server.py
├── start_servers_fastmcp.py
├── demo_fastmcp.py
├── test_fastmcp_client.py
├── src/
├── package.json
├── requirements.txt
└── ...
```

### 迁移后（分层结构）
```
├── start.py
├── backend/
├── frontend/
├── scripts/
├── tests/
└── docs/
```

## 📈 未来扩展

这种结构支持以下扩展：

1. **多服务架构**: 可以在 backend 下添加更多服务
2. **多前端支持**: 可以添加移动端、桌面端等
3. **CI/CD 集成**: 每个模块可以独立构建和部署
4. **微服务拆分**: 后端可以进一步拆分为多个服务
5. **插件系统**: 可以添加 plugins 目录支持插件

这种结构为项目的长期发展奠定了良好的基础！
